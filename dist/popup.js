(()=>{"use strict";var e={874:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,s){function c(e){try{a(o.next(e))}catch(e){s(e)}}function r(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const i=n(561);function s(e){const t=document.getElementById("spotify-login-notification"),n=document.getElementById("spotify-player");switch(e){case"spotify-player-box":n.style.display="flex",t.style.display="none";break;case"please-login-box":n.style.display="none",t.style.display="flex"}}t.App=class{constructor(){this.token=null,this.track=null}render(){return o(this,void 0,void 0,(function*(){this.token=yield i.getAccessToken(),console.log(this.isLoggedIn()),this.isLoggedIn()?yield this.showPlayerUI():s("please-login-box")}))}showPlayerUI(){return o(this,void 0,void 0,(function*(){s("spotify-player-box")}))}isLoggedIn(){return!this.token.isAnonymous}}},623:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CONTEXT_MENU_ITEM_TEXT=t.CONTEXT_MENU_ITEM=t.API_URL=t.WEB_PLAYER_URL=void 0,t.WEB_PLAYER_URL="https://open.spotify.com",t.API_URL="https://api.spotify.com",t.CONTEXT_MENU_ITEM="spotify-extension-search-on-spotify",t.CONTEXT_MENU_ITEM_TEXT='Search Spotify for "%s"'},561:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,s){function c(e){try{a(o.next(e))}catch(e){s(e)}}function r(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getTrack=t.getAccessToken=void 0;const i=n(623);t.getAccessToken=function(){return o(this,void 0,void 0,(function*(){let e={clientId:null,accessToken:null,accessTokenExpirationTime:null,isAnonymous:null};try{const t=`${i.WEB_PLAYER_URL}/get_access_token`,n=yield fetch(t);e=yield n.json()}catch(e){}return e}))},t.getTrack=function(e){return o(this,void 0,void 0,(function*(){const t=`${i.API_URL}/v1/me/player?additional_types=track`;try{const n=yield fetch(t,{headers:{Authorization:`Bearer ${e}`}});return yield n.json()}catch(e){return!1}}))}},975:(e,t,n)=>{(new(n(874).App)).render()}},t={};!function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(975)})();